package dev.syntax;

import static org.junit.jupiter.api.Assertions.*;
import static org.mockito.Mockito.when;

import java.time.LocalDate;
import java.time.Month;

import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.function.Executable;
import org.mockito.InjectMocks;
import org.mockito.Mock;

import dev.syntax.data.BookingDAO;
import dev.syntax.data.BookingRequest;
import dev.syntax.exception.BusinessException;
import dev.syntax.service.BookingService;
import dev.syntax.service.MailSender;
import dev.syntax.service.PaymentService;
import dev.syntax.service.RoomService;

public class Test05 {
  
  @InjectMocks
  private BookingService bookingService;
  @Mock
  private PaymentService paymentServiceMock;
  @Mock
  private RoomService roomServiceMock;
  @Mock
  private BookingDAO bookingDAOMock;
  @Mock
  private MailSender mailSenderMock;
  
  
  
  @Test
  @DisplayName("적절한 예약 정보가 전달되면 룸 예약 비용을 계산 할 수 있다.")
  // 예약 정보 - BookingRequest
  // 룸 예약 비용 계산 - BookingService.caculatePrice(예약 정보)
  void test1() {
    // Given
      // 1. 예약 정보 객체 생성
      BookingRequest bookingRequest = BookingRequest.builder()
          .userId("1")
          .dateFrom(LocalDate.of(2025, Month.JANUARY, 1))
          .dateTo(LocalDate.of(2025, Month.JANUARY, 5))
          .guestCount(2)
          .prepaid(false)
          .build();
      
      // 개발자가 기대하는 값
      double expected = 4 * 2 * 50.0;
    
      // 2. BookingService 인스턴스 생성
    
    // When
    double actual=bookingService.calculatePrice(bookingRequest);
    // Then
    assertEquals(expected,actual);
  }
}

