package dev.syntax;

import static org.mockito.Mockito.mock;

import java.time.LocalDate;
import java.time.Month;

import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

import dev.syntax.data.BookingDAO;
import dev.syntax.data.BookingRequest;
import dev.syntax.service.BookingService;
import dev.syntax.service.MailSender;
import dev.syntax.service.PaymentService;
import dev.syntax.service.RoomService;

public class Test01 {
  
  private BookingService bookingService;
  private PaymentService paymentServiceMock;
  private RoomService roomServiceMock;
  private BookingDAO bookingDAOMock;
  private MailSender mailSenderMock;
  
  
  @BeforeEach // 개별(Each) 테스트케이스(@Test)가 실행되기 전에 한번씩 실행됨
  void setup() { // 테스트 코드 실행 전 필요한 사전 준비 작업
	  this.paymentServiceMock=mock(PaymentService.class);
	  this.roomServiceMock=mock(RoomService.class);
	  this.bookingDAOMock=mock(BookingDAO.class);
	  this.mailSenderMock=mock(MailSender.class);
	  
	  this.bookingService =
			  new BookingService(paymentServiceMock,
					  roomServiceMock,
					  bookingDAOMock,
					  mailSenderMock
					  
					  );
  }
  
  @Test
  @DisplayName("적절한 예약 정보가 전달되면 룸 예약 비용을 계산 할 수 있다.")
  // 예약 정보 - BookingRequest
  // 룸 예약 비용 계산 - BookingService.caculatePrice(예약 정보)
  void test1() {
    // Given
      // 1. 예약 정보 객체 생성
      BookingRequest bookingRequest = BookingRequest.builder()
          .userId("1")
          .dateFrom(LocalDate.of(2025, Month.JANUARY, 1))
          .dateTo(LocalDate.of(2025, Month.JANUARY, 5))
          .guestCount(2)
          .prepaid(false)
          .build();
      
      // 개발자가 기대하는 값
      double expected = 4 * 2 * 50.0;
    
      // 2. BookingService 인스턴스 생성
    
    // When
    
    // Then
  }
}
